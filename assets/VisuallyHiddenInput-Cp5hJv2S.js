import{e as y,U as W,r as S,O as Q,d as E,C as X,V as Z,y as B,B as U,P as ee,J as te,i as w,o as I,w as T,q as P,u as m,h as D,L as re,H as ne,G as ae,m as q,c as O,j as oe,F as R,D as ie}from"./iframe-g1OyoVNp.js";import{g as N,S as j,a as ue,c as le,P as K}from"./Primitive-Crv9Vuff.js";import{u as se}from"./useId-BXecDKyx.js";import{g as z}from"./getActiveElement-FUKBWQwh.js";import{u as ce}from"./useDirection-DLWXcg7w.js";import{V as fe}from"./VisuallyHidden-D484b0it.js";function M(a){return typeof a=="string"?`'${a}'`:new de().serialize(a)}const de=(function(){class a{#e=new Map;compare(e,r){const n=typeof e,o=typeof r;return n==="string"&&o==="string"?e.localeCompare(r):n==="number"&&o==="number"?e-r:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(r,!0))}serialize(e,r){if(e===null)return"null";switch(typeof e){case"string":return r?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const r=Object.prototype.toString.call(e);if(r!=="[object Object]")return this.serializeBuiltInType(r.length<10?`unknown:${r}`:r.slice(8,-1),e);const n=e.constructor,o=n===Object||n===void 0?"":n.name;if(o!==""&&globalThis[o]===n)return this.serializeBuiltInType(o,e);if(typeof e.toJSON=="function"){const i=e.toJSON();return o+(i!==null&&typeof i=="object"?this.$object(i):`(${this.serialize(i)})`)}return this.serializeObjectEntries(o,Object.entries(e))}serializeBuiltInType(e,r){const n=this["$"+e];if(n)return n.call(this,r);if(typeof r?.entries=="function")return this.serializeObjectEntries(e,r.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,r){const n=Array.from(r).sort((i,f)=>this.compare(i[0],f[0]));let o=`${e}{`;for(let i=0;i<n.length;i++){const[f,d]=n[i];o+=`${this.serialize(f,!0)}:${this.serialize(d)}`,i<n.length-1&&(o+=",")}return o+"}"}$object(e){let r=this.#e.get(e);return r===void 0&&(this.#e.set(e,`#${this.#e.size}`),r=this.serializeObject(e),this.#e.set(e,r)),r}$function(e){const r=Function.prototype.toString.call(e);return r.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${r.replace(/\s*\n\s*/g,"")}`}$Array(e){let r="[";for(let n=0;n<e.length;n++)r+=this.serialize(e[n]),n<e.length-1&&(r+=",");return r+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((r,n)=>this.compare(r,n)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const t of["Error","RegExp","URL"])a.prototype["$"+t]=function(e){return`${t}(${e})`};for(const t of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])a.prototype["$"+t]=function(e){return`${t}[${e.join(",")}]`};for(const t of["BigInt64Array","BigUint64Array"])a.prototype["$"+t]=function(e){return`${t}[${e.join("n,")}${e.length>0?"n":""}]`};return a})();function Be(a,t){return a===t||M(a)===M(t)}function Oe(a){return y(()=>W(a)?!!N(a)?.closest("form"):!0)}function C(){const a=S(),t=y(()=>["#text","#comment"].includes(a.value?.$el.nodeName)?a.value?.$el.nextElementSibling:N(a));return{primitiveElement:a,currentElement:t}}const V="data-reka-collection-item";function x(a={}){const{key:t="",isProvider:e=!1}=a,r=`${t}CollectionProvider`;let n;if(e){const l=S(new Map);n={collectionRef:S(),itemMap:l},ee(r,n)}else n=Q(r);const o=(l=!1)=>{const s=n.collectionRef.value;if(!s)return[];const c=Array.from(s.querySelectorAll(`[${V}]`)),b=Array.from(n.itemMap.value.values()).sort((h,$)=>c.indexOf(h.ref)-c.indexOf($.ref));return l?b:b.filter(h=>h.ref.dataset.disabled!=="")},i=E({name:"CollectionSlot",setup(l,{slots:s}){const{primitiveElement:c,currentElement:g}=C();return U(g,()=>{n.collectionRef.value=g.value}),()=>B(j,{ref:c},s)}}),f=E({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(l,{slots:s,attrs:c}){const{primitiveElement:g,currentElement:b}=C();return X(h=>{if(b.value){const $=Z(b.value);n.itemMap.value.set($,{ref:b.value,value:l.value}),h(()=>n.itemMap.value.delete($))}}),()=>B(j,{...c,[V]:"",ref:g},s)}}),d=y(()=>Array.from(n.itemMap.value.values())),u=y(()=>n.itemMap.value.size);return{getItems:o,reactiveItems:d,itemMapSize:u,CollectionSlot:i,CollectionItem:f}}const pe="rovingFocusGroup.onEntryFocus",ve={bubbles:!1,cancelable:!0},me={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ye(a,t){return t!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function ge(a,t,e){const r=ye(a.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return me[r]}function H(a,t=!1){const e=z();for(const r of a)if(r===e||(r.focus({preventScroll:t}),z()!==e))return}function be(a,t){return a.map((e,r)=>a[(t+r)%a.length])}const[he,Ie]=le("RovingFocusGroup");var $e=E({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(a,{expose:t,emit:e}){const r=a,n=e,{loop:o,orientation:i,dir:f}=te(r),d=ce(f),u=ue(r,"currentTabStopId",n,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),l=S(!1),s=S(!1),c=S(0),{getItems:g,CollectionSlot:b}=x({isProvider:!0});function h(p){const A=!s.value;if(p.currentTarget&&p.target===p.currentTarget&&A&&!l.value){const _=new CustomEvent(pe,ve);if(p.currentTarget.dispatchEvent(_),n("entryFocus",_),!_.defaultPrevented){const F=g().map(v=>v.ref).filter(v=>v.dataset.disabled!==""),L=F.find(v=>v.getAttribute("data-active")===""),G=F.find(v=>v.getAttribute("data-highlighted")===""),J=F.find(v=>v.id===u.value),Y=[L,G,J,...F].filter(Boolean);H(Y,r.preventScrollOnEntryFocus)}}s.value=!1}function $(){setTimeout(()=>{s.value=!1},1)}return t({getItems:g}),Ie({loop:o,dir:d,orientation:i,currentTabStopId:u,onItemFocus:p=>{u.value=p},onItemShiftTab:()=>{l.value=!0},onFocusableItemAdd:()=>{c.value++},onFocusableItemRemove:()=>{c.value--}}),(p,A)=>(I(),w(m(b),null,{default:T(()=>[P(m(K),{tabindex:l.value||c.value===0?-1:0,"data-orientation":m(i),as:p.as,"as-child":p.asChild,dir:m(d),style:{outline:"none"},onMousedown:A[0]||(A[0]=_=>s.value=!0),onMouseup:$,onFocus:h,onBlur:A[1]||(A[1]=_=>l.value=!1)},{default:T(()=>[D(p.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Re=$e,Ae=E({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const t=a,e=he(),r=se(),n=y(()=>t.tabStopId||r),o=y(()=>e.currentTabStopId.value===n.value),{getItems:i,CollectionItem:f}=x();re(()=>{t.focusable&&e.onFocusableItemAdd()}),ne(()=>{t.focusable&&e.onFocusableItemRemove()});function d(u){if(u.key==="Tab"&&u.shiftKey){e.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const l=ge(u,e.orientation.value,e.dir.value);if(l!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||!t.allowShiftKey&&u.shiftKey)return;u.preventDefault();let s=[...i().map(c=>c.ref).filter(c=>c.dataset.disabled!=="")];if(l==="last")s.reverse();else if(l==="prev"||l==="next"){l==="prev"&&s.reverse();const c=s.indexOf(u.currentTarget);s=e.loop.value?be(s,c+1):s.slice(c+1)}ae(()=>H(s))}}return(u,l)=>(I(),w(m(f),null,{default:T(()=>[P(m(K),{tabindex:o.value?0:-1,"data-orientation":m(e).orientation.value,"data-active":u.active?"":void 0,"data-disabled":u.focusable?void 0:"",as:u.as,"as-child":u.asChild,onMousedown:l[0]||(l[0]=s=>{u.focusable?m(e).onItemFocus(n.value):s.preventDefault()}),onFocus:l[1]||(l[1]=s=>m(e).onItemFocus(n.value)),onKeydown:d},{default:T(()=>[D(u.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),je=Ae,Se=E({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(a){const t=a,{primitiveElement:e,currentElement:r}=C(),n=y(()=>t.checked??t.value);return U(n,(o,i)=>{if(!r.value)return;const f=r.value,d=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(d,"value").set;if(l&&o!==i){const s=new Event("input",{bubbles:!0}),c=new Event("change",{bubbles:!0});l.call(f,o),f.dispatchEvent(s),f.dispatchEvent(c)}}),(o,i)=>(I(),w(fe,q({ref_key:"primitiveElement",ref:e},{...t,...o.$attrs},{as:"input"}),null,16))}}),k=Se,Ee=E({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(a){const t=a,e=y(()=>typeof t.value=="object"&&Array.isArray(t.value)&&t.value.length===0&&t.required),r=y(()=>typeof t.value=="string"||typeof t.value=="number"||typeof t.value=="boolean"||t.value===null||t.value===void 0?[{name:t.name,value:t.value}]:typeof t.value=="object"&&Array.isArray(t.value)?t.value.flatMap((n,o)=>typeof n=="object"?Object.entries(n).map(([i,f])=>({name:`${t.name}[${o}][${i}]`,value:f})):{name:`${t.name}[${o}]`,value:n}):t.value!==null&&typeof t.value=="object"&&!Array.isArray(t.value)?Object.entries(t.value).map(([n,o])=>({name:`${t.name}[${n}]`,value:o})):[]);return(n,o)=>(I(),O(R,null,[oe(" We render single input if it's required "),e.value?(I(),w(k,q({key:n.name},{...t,...n.$attrs},{name:n.name,value:n.value}),null,16,["name","value"])):(I(!0),O(R,{key:1},ie(r.value,i=>(I(),w(k,q({key:i.name},{ref_for:!0},{...t,...n.$attrs},{name:i.name,value:i.value}),null,16,["name","value"]))),128))],2112))}}),ze=Ee;export{je as R,ze as V,Re as a,Be as i,Oe as u};
