import{T as k,a5 as S,a6 as q,e as v,r as b,w as D,i as h,z as O,d as g,P as I,v as _,o as L,x as W,h as C,u as p,N as A,B as x,a7 as z}from"./iframe-Cg9A2K9u.js";import{u as M}from"./useForwardProps-Bp6OZIIi.js";import{i as T,a as N,p as R,P as K,q as H}from"./Primitive-lpIBovky.js";function B(a,s,t){const e=t.originalEvent.target,i=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:t});s&&e.addEventListener(a,s,{once:!0}),e.dispatchEvent(i)}function U(a){const s=k(),t=s?.type.emits,e={};return t?.length||console.warn(`No emitted event found. Please check component: ${s?.type.__name}`),t?.forEach(i=>{e[S(q(i))]=(...r)=>a(i,...r)}),e}function ee(a,s){const t=M(a),e=s?U(s):{};return v(()=>({...t.value,...e}))}const $="dismissableLayer.pointerDownOutside",V="dismissableLayer.focusOutside";function F(a,s){const t=s.closest("[data-dismissable-layer]"),e=a.dataset.dismissableLayer===""?a:a.querySelector("[data-dismissable-layer]"),i=Array.from(a.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(t&&(e===t||i.indexOf(e)<i.indexOf(t)))}function j(a,s,t=!0){const e=s?.value?.ownerDocument??globalThis?.document,i=b(!1),r=b(()=>{});return D(l=>{if(!T||!h(t))return;const o=async c=>{const y=c.target;if(!(!s?.value||!y)){if(F(s.value,y)){i.value=!1;return}if(c.target&&!i.value){let m=function(){B($,a,w)};const w={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.value),r.value=m,e.addEventListener("click",r.value,{once:!0})):m()}else e.removeEventListener("click",r.value);i.value=!1}},d=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);l(()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{h(t)&&(i.value=!0)}}}function G(a,s,t=!0){const e=s?.value?.ownerDocument??globalThis?.document,i=b(!1);return D(r=>{if(!T||!h(t))return;const l=async o=>{if(!s?.value)return;await O(),await O();const d=o.target;!s.value||!d||F(s.value,d)||o.target&&!i.value&&B(V,a,{originalEvent:o})};e.addEventListener("focusin",l),r(()=>e.removeEventListener("focusin",l))}),{onFocusCapture:()=>{h(t)&&(i.value=!0)},onBlurCapture:()=>{h(t)&&(i.value=!1)}}}const u=I({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var J=g({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(a,{emit:s}){const t=a,e=s,{forwardRef:i,currentElement:r}=N(),l=v(()=>r.value?.ownerDocument??globalThis.document),o=v(()=>u.layersRoot),d=v(()=>r.value?Array.from(o.value).indexOf(r.value):-1),c=v(()=>u.layersWithOutsidePointerEventsDisabled.size>0),y=v(()=>{const n=Array.from(o.value),[f]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=n.indexOf(f);return d.value>=E}),w=j(async n=>{const f=[...u.branches].some(E=>E?.contains(n.target));!y.value||f||(e("pointerDownOutside",n),e("interactOutside",n),await O(),n.defaultPrevented||e("dismiss"))},r),m=G(n=>{[...u.branches].some(E=>E?.contains(n.target))||(e("focusOutside",n),e("interactOutside",n),n.defaultPrevented||e("dismiss"))},r);R("Escape",n=>{d.value===o.value.size-1&&(e("escapeKeyDown",n),n.defaultPrevented||e("dismiss"))});let P;return D(n=>{r.value&&(t.disableOutsidePointerEvents&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(P=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(r.value)),o.value.add(r.value),n(()=>{t.disableOutsidePointerEvents&&u.layersWithOutsidePointerEventsDisabled.size===1&&(l.value.body.style.pointerEvents=P)}))}),D(n=>{n(()=>{r.value&&(o.value.delete(r.value),u.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(n,f)=>(L(),_(p(K),{ref:p(i),"as-child":n.asChild,as:n.as,"data-dismissable-layer":"",style:A({pointerEvents:c.value?y.value?"auto":"none":void 0}),onFocusCapture:p(m).onFocusCapture,onBlurCapture:p(m).onBlurCapture,onPointerdownCapture:p(w).onPointerDownCapture},{default:W(()=>[C(n.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),te=J,Q=g({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(a){const s=H();return(t,e)=>p(s)||t.forceMount?(L(),_(z,{key:0,to:t.to,disabled:t.disabled,defer:t.defer},[C(t.$slots,"default")],8,["to","disabled","defer"])):x("v-if",!0)}}),se=Q;export{te as D,se as T,ee as a,U as u};
