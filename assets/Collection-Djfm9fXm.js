import{f as S,S as v}from"./Primitive-CMMeSLXd.js";import{r as m,e as u,U as x,d,m as I,k as p,w as k,Y as $,V as g}from"./iframe-6njZHdNW.js";function P(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function E(){const e=m(),c=u(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:S(e));return{primitiveElement:e,currentElement:c}}const w="data-reka-collection-item";function _(e={}){const{key:c="",isProvider:A=!1}=e,f=`${c}CollectionProvider`;let t;if(A){const n=m(new Map);t={collectionRef:m(),itemMap:n},g(f,t)}else t=x(f);const M=(n=!1)=>{const l=t.collectionRef.value;if(!l)return[];const o=Array.from(l.querySelectorAll(`[${w}]`)),r=Array.from(t.itemMap.value.values()).sort((a,s)=>o.indexOf(a.ref)-o.indexOf(s.ref));return n?r:r.filter(a=>a.ref.dataset.disabled!=="")},R=d({name:"CollectionSlot",setup(n,{slots:l}){const{primitiveElement:o,currentElement:i}=E();return k(i,()=>{t.collectionRef.value=i.value}),()=>p(v,{ref:o},l)}}),h=d({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:l,attrs:o}){const{primitiveElement:i,currentElement:r}=E();return I(a=>{if(r.value){const s=$(r.value);t.itemMap.value.set(s,{ref:r.value,value:n.value}),a(()=>t.itemMap.value.delete(s))}}),()=>p(v,{...o,[w]:"",ref:i},l)}}),y=u(()=>Array.from(t.itemMap.value.values())),C=u(()=>t.itemMap.value.size);return{getItems:M,reactiveItems:y,itemMapSize:C,CollectionSlot:R,CollectionItem:h}}export{_ as a,P as g,E as u};
