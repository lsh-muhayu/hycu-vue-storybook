import{S as m}from"./Primitive-B803zNXz.js";import{u}from"./usePrimitiveElement-BGUVxrxa.js";import{r as f,U as I,b as v,d,y as S,q as p,x,Y as k,V as T}from"./iframe-g9sDDPE3.js";function $(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const E="data-reka-collection-item";function b(t={}){const{key:A="",isProvider:M=!1}=t,c=`${A}CollectionProvider`;let e;if(M){const l=f(new Map);e={collectionRef:f(),itemMap:l},T(c,e)}else e=I(c);const R=(l=!1)=>{const o=e.collectionRef.value;if(!o)return[];const n=Array.from(o.querySelectorAll(`[${E}]`)),r=Array.from(e.itemMap.value.values()).sort((i,s)=>n.indexOf(i.ref)-n.indexOf(s.ref));return l?r:r.filter(i=>i.ref.dataset.disabled!=="")},h=d({name:"CollectionSlot",setup(l,{slots:o}){const{primitiveElement:n,currentElement:a}=u();return x(a,()=>{e.collectionRef.value=a.value}),()=>p(m,{ref:n},o)}}),w=d({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(l,{slots:o,attrs:n}){const{primitiveElement:a,currentElement:r}=u();return S(i=>{if(r.value){const s=k(r.value);e.itemMap.value.set(s,{ref:r.value,value:l.value}),i(()=>e.itemMap.value.delete(s))}}),()=>p(m,{...n,[E]:"",ref:a},o)}}),y=v(()=>Array.from(e.itemMap.value.values())),C=v(()=>e.itemMap.value.size);return{getItems:R,reactiveItems:y,itemMapSize:C,CollectionSlot:h,CollectionItem:w}}export{$ as g,b as u};
