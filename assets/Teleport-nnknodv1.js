import{i as k}from"./nullish-CHIgUVhi.js";import{i as P,u as F,p as S,P as q,q as W}from"./Primitive-BNbnNruP.js";import{h as g}from"./handleAndDispatchCustomEvent-ChOKVcqp.js";import{r as O,y as E,a1 as h,K as b,d as _,b as D,a0 as I,i as L,o as C,w as A,k as B,u as v,A as x,g as M,Z as z}from"./iframe-BQJpkvah.js";const R="dismissableLayer.pointerDownOutside",K="dismissableLayer.focusOutside";function T(u,i){const s=i.closest("[data-dismissable-layer]"),e=u.dataset.dismissableLayer===""?u:u.querySelector("[data-dismissable-layer]"),n=Array.from(u.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(s&&(e===s||n.indexOf(e)<n.indexOf(s)))}function N(u,i,s=!0){const e=i?.value?.ownerDocument??globalThis?.document,n=O(!1),r=O(()=>{});return E(l=>{if(!P||!h(s))return;const a=async c=>{const p=c.target;if(!(!i?.value||!p)){if(T(i.value,p)){n.value=!1;return}if(c.target&&!n.value){let y=function(){g(R,u,w)};const w={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.value),r.value=y,e.addEventListener("click",r.value,{once:!0})):y()}else e.removeEventListener("click",r.value);n.value=!1}},d=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);l(()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{h(s)&&(n.value=!0)}}}function U(u,i,s=!0){const e=i?.value?.ownerDocument??globalThis?.document,n=O(!1);return E(r=>{if(!P||!h(s))return;const l=async a=>{if(!i?.value)return;await b(),await b();const d=a.target;!i.value||!d||T(i.value,d)||a.target&&!n.value&&g(K,u,{originalEvent:a})};e.addEventListener("focusin",l),r(()=>e.removeEventListener("focusin",l))}),{onFocusCapture:()=>{h(s)&&(n.value=!0)},onBlurCapture:()=>{h(s)&&(n.value=!1)}}}const o=I({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,originalBodyPointerEvents:void 0,branches:new Set});var H=_({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(u,{emit:i}){const s=u,e=i,{forwardRef:n,currentElement:r}=F(),l=D(()=>r.value?.ownerDocument??globalThis.document),a=D(()=>o.layersRoot),d=D(()=>r.value?Array.from(a.value).indexOf(r.value):-1),c=D(()=>o.layersWithOutsidePointerEventsDisabled.size>0),p=D(()=>{const t=Array.from(a.value),[f]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),m=t.indexOf(f);return d.value>=m}),w=N(async t=>{const f=[...o.branches].some(m=>m?.contains(t.target));!p.value||f||(e("pointerDownOutside",t),e("interactOutside",t),await b(),t.defaultPrevented||e("dismiss"))},r),y=U(t=>{[...o.branches].some(m=>m?.contains(t.target))||(e("focusOutside",t),e("interactOutside",t),t.defaultPrevented||e("dismiss"))},r);return S("Escape",t=>{d.value===a.value.size-1&&(e("escapeKeyDown",t),t.defaultPrevented||e("dismiss"))}),E(t=>{r.value&&(s.disableOutsidePointerEvents&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(o.originalBodyPointerEvents=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(r.value)),a.value.add(r.value),t(()=>{s.disableOutsidePointerEvents&&o.layersWithOutsidePointerEventsDisabled.size===1&&!k(o.originalBodyPointerEvents)&&(l.value.body.style.pointerEvents=o.originalBodyPointerEvents)}))}),E(t=>{t(()=>{r.value&&(a.value.delete(r.value),o.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(t,f)=>(C(),L(v(q),{ref:v(n),"as-child":t.asChild,as:t.as,"data-dismissable-layer":"",style:x({pointerEvents:c.value?p.value?"auto":"none":void 0}),onFocusCapture:v(y).onFocusCapture,onBlurCapture:v(y).onBlurCapture,onPointerdownCapture:v(w).onPointerDownCapture},{default:A(()=>[B(t.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),J=H,V=_({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(u){const i=W();return(s,e)=>v(i)||s.forceMount?(C(),L(z,{key:0,to:s.to,disabled:s.disabled,defer:s.defer},[B(s.$slots,"default")],8,["to","disabled","defer"])):M("v-if",!0)}}),Q=V;export{J as D,Q as T};
